var gdjs;(function(d){const u=GlobalPIXIModule.PIXI;class g{constructor(e){this._resources=e,this._invalidTexture=u.Texture.from("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAFElEQVQoU2P8z/D/PwMewDgyFAAApMMX8Zi0uXAAAAAASUVORK5CYIIA"),this._loadedTextures=new Hashtable}setResources(e){this._resources=e}getPIXITexture(e){if(this._loadedTextures.containsKey(e)){const t=this._loadedTextures.get(e);if(t.valid)return t;console.error("Texture for "+e+" is not valid anymore.")}if(e==="")return this._invalidTexture;if(this._resources){let t=null;for(let o=0,i=this._resources.length;o<i;++o){const n=this._resources[o];if(n.name===e&&n.kind==="image"){t=u.Texture.from(n.file);break}}if(t!==null)return console.log('Loaded texture for resource "'+e+'".'),this._loadedTextures.put(e,t),t}return console.warn('Unable to find texture for resource "'+e+'".'),this._invalidTexture}getPIXIVideoTexture(e){if(this._loadedTextures.containsKey(e))return this._loadedTextures.get(e);if(e==="")return this._invalidTexture;if(this._resources){let t=null;for(let o=0,i=this._resources.length;o<i;++o){const n=this._resources[o];if(n.name===e&&n.kind==="video"){t=u.Texture.from(n.file);break}}if(t!==null)return console.log('Loaded video texture for resource "'+e+'".'),this._loadedTextures.put(e,t),t}return console.warn('Unable to find video texture for resource "'+e+'".'),this._invalidTexture}getInvalidPIXITexture(){return this._invalidTexture}loadTextures(e,t){const o=this._resources,i={};for(let s=0,a=o.length;s<a;++s){const r=o[s];if(r.file&&r.kind==="image"){if(this._loadedTextures.containsKey(r.name))continue;i[r.file]=i[r.file]?i[r.file].concat(r):[r]}}const n=Object.keys(i).length;if(n===0)return t(n);const l=u.Loader.shared,c=this;let f=0;const h=l.onProgress.add(function(){f++,e(f,n)});for(const s in i)i.hasOwnProperty(s)&&l.add(s,s);l.load(function(s,a){s.onProgress.detach(h);for(const r in a)if(a.hasOwnProperty(r)){if(!i.hasOwnProperty(r))continue;i[r].forEach(function(x){c._loadedTextures.put(x.name,a[r].texture),x.smoothed||(a[r].texture.baseTexture.scaleMode=u.SCALE_MODES.NEAREST)})}t(n)})}}d.PixiImageManager=g,d.ImageManager=d.PixiImageManager})(gdjs||(gdjs={}));
//# sourceMappingURL=pixi-image-manager.js.map
