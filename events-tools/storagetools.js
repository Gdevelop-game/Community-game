var gdjs;(function(g){let p;(function(S){let d;(function(a){let c=null;try{typeof cc!="undefined"?c=cc.sys.localStorage:typeof window!="undefined"&&(c=window.localStorage)}catch(t){console.warn("Unable to get access to the localStorage: ",t)}c||console.warn("Storage actions won't work as no localStorage was found.");const u=new Hashtable;a.loadJSONFileFromStorage=t=>{if(u.containsKey(t))return;let o=null;try{c&&(o=c.getItem("GDJS_"+t))}catch(l){console.warn('Unable to load data from localStorage for "'+t+'":',l)}let i={};try{o&&(i=JSON.parse(o))}catch(l){console.warn('Unable to load data from "'+t+'" - data is not valid JSON:',l)}u.put(t,i)},a.unloadJSONFile=t=>{if(!u.containsKey(t))return;const o=u.get(t),i=JSON.stringify(o);try{c&&c.setItem("GDJS_"+t,i)}catch(l){console.warn('Unable to save data to localStorage for "'+t+'":',l)}u.remove(t)};const f=(t,o)=>{let i=!1;u.containsKey(t)||(i=!0,a.loadJSONFileFromStorage(t));const l=o(u.get(t));return i&&a.unloadJSONFile(t),l};a.clearJSONFile=t=>f(t,o=>{for(const i in o)o.hasOwnProperty(i)&&delete o[i];return!0}),a.elementExistsInJSONFile=(t,o)=>f(t,i=>{const l=o.split("/");let n=i;for(let e=0;e<l.length;++e){if(!n[l[e]])return!1;n=n[l[e]]}return!0}),a.deleteElementFromJSONFile=(t,o)=>f(t,i=>{const l=o.split("/");let n=i;for(let e=0;e<l.length;++e){if(!n[l[e]])return!1;e===l.length-1?delete n[l[e]]:n=n[l[e]]}return!0}),a.writeNumberInJSONFile=(t,o,i)=>f(t,l=>{const n=o.split("/");let e=l;for(let r=0;r<n.length;++r)e[n[r]]||(e[n[r]]={}),r===n.length-1?e[n[r]].value=i:e=e[n[r]];return!0}),a.writeStringInJSONFile=(t,o,i)=>f(t,l=>{const n=o.split("/");let e=l;for(let r=0;r<n.length;++r)e[n[r]]||(e[n[r]]={}),r===n.length-1?e[n[r]].str=i:e=e[n[r]];return!0}),a.readNumberFromJSONFile=(t,o,i,l)=>f(t,n=>{const e=o.split("/");let r=n;for(let s=0;s<e.length;++s){if(!r[e[s]])return!1;s===e.length-1&&typeof r[e[s]].value!="undefined"?l.setNumber(r[e[s]].value):r=r[e[s]]}return!0}),a.readStringFromJSONFile=(t,o,i,l)=>f(t,n=>{const e=o.split("/");let r=n;for(let s=0;s<e.length;++s){if(!r[e[s]])return!1;s===e.length-1&&typeof r[e[s]].str!="undefined"?l.setString(r[e[s]].str):r=r[e[s]]}return!0})})(d=S.storage||(S.storage={}))})(p=g.evtTools||(g.evtTools={}))})(gdjs||(gdjs={}));
//# sourceMappingURL=storagetools.js.map
